package com.CS477.drinkandgo.activies;

import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;

import android.os.Bundle;
import android.util.JsonReader;
import android.view.View;

import com.CS477.drinkandgo.Customer;
import com.CS477.drinkandgo.R;


public class MainActivity extends DrinkAndGoActivity 
{
    public MainActivity()
    {	super(R.layout.activity_main);}
    
    @Override
    protected void onCreate(Bundle bundle)
    {
    	super.onCreate(bundle);
    	if(customers == null || venues == null)
    	{
    		customers = new ArrayList();
    		venues = new ArrayList();
    		try
    		{
    			JsonReader reader = new JsonReader(new InputStreamReader
    							(getAssets().open("eld66.json"), "UTF-8"));
 
    			readMessages(reader);
    			reader.close();
    			System.out.println(customers);
    			System.out.println(venues);
    		}
    		catch(Exception e){e.printStackTrace();}
    	}
    }
    
    private void readMessages(JsonReader reader) throws IOException
    {
    	reader.beginArray();
    	while(reader.hasNext())
    		readMessage(reader);
    	reader.endArray();
    }
    
    private void readMessage(JsonReader reader) throws IOException
    {
    	reader.beginObject();
    	while(reader.hasNext())
    	{
    		String key = reader.nextName();
    		if(key.equals("credit"))
    		{
    			long credit = reader.nextLong();
    			String name = reader.nextName();
				name = reader.nextString();
				String username = reader.nextName();
				username = reader.nextString();
				String password = reader.nextName();
				password = reader.nextString();
				customers.add(new Customer(name, username, password, credit));
    		}
    		else if(key.equals("venue"))
    		{
    			
    		}
    		else reader.skipValue();
    	}
    }
    
    public void gotoSignIn(View view)
    {	startActivity(SignInActivity.class);}
    
    public void gotoSignUp(View view)
    {	startActivity(SignUpActivity.class);}
}
