package com.CS477.drinkandgo.activies;

import static org.xmlpull.v1.XmlPullParser.*;

import java.io.IOException;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;

import android.os.Bundle;
import android.util.Xml;
import android.view.View;

import com.CS477.drinkandgo.Customer;
import com.CS477.drinkandgo.R;


public class MainActivity extends DrinkAndGoActivity 
{
    public MainActivity()
    {	super(R.layout.activity_main);}
    
    @Override
    protected void onCreate(Bundle bundle)
    {
    	super.onCreate(bundle);
    	try
    	{	
    		parseXml();
    	}
    	catch(Exception e)
    	{
    		e.printStackTrace();
    	}
    }
    
    private void parseXml() throws XmlPullParserException, IOException
    {
    	XmlPullParser parser = Xml.newPullParser();
		parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
		parser.setInput(getAssets().open("eld66.xml"), null);
		int eventType = parser.getEventType();
		while(eventType != END_DOCUMENT)
		{
			if(eventType == START_TAG)
			{
				String tag = parser.getName();
				if(tag != null && tag.equals("table"))
				{
					String tableID = parser.getAttributeValue(null, "name");
					if(tableID.equals("customer"))
					{
						String values[] = new String[5];
						int i = 0, curTag = parser.next();
						String curName = parser.getName();
						while(i < 5)
						{
							if(curTag == START_TAG)
							{
								parser.next();
								values[i++] = new String(parser.getText());
							}
							curTag = parser.next();
						}
						customers.add(new Customer(values));
					}
				}
			}
			eventType = parser.next();
		}
		System.out.println(customers);
		System.out.println(venues);
    }
    
    public void gotoSignIn(View view)
    {	startActivity(SignInActivity.class);}
    
    public void gotoSignUp(View view)
    {	startActivity(SignUpActivity.class);}
}
